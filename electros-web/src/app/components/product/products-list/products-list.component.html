<title>Products list</title>
<p-table #dt class="table" [value]="products" [rows]="10" [paginator]="true"  [rowHover]="true"
         [showCurrentPageReport]="true" [globalFilterFields]="['productName','id']"
         currentPageReportTemplate="{first} to {last} of {totalRecords} records">
  <ng-template pTemplate="caption">
    <div>
      <h2>Products list</h2>
      <div>
        <i class="pi pi-search"></i>
        <input pInputText type="text" (input)="dt.filterGlobal(getValue($event), 'contains')" placeholder="Search" />
      </div>
    </div>
  </ng-template>
  <ng-template pTemplate="header">
    <tr>
      <th>Id</th>
      <th></th>
      <th>Name</th>
      <th>Price</th>
      <th>Stock</th>
      <th>Unit</th>
      <th>Warranty Years</th>
      <th>Fabrication Year</th>
      <th></th>
      <th><button pButton pRipple icon="pi pi-plus-circle" *ngIf="isAdmin" (click)="addProduct()"></button></th>
      <th></th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-product>
    <tr>
      <td>{{product.id}}</td>
      <td><img alt="image" src="data:image/png;base64, {{product.image}}"></td>
      <td>{{product.productName}}</td>
      <td>{{product.price}}</td>
      <td>{{product.stock}}</td>
      <td>{{product.unitMeasurement}}</td>
      <td>{{product.warrantyYears}}</td>
      <td>{{product.fabricationYear}}</td>
      <td>
        <i pRipple class="pi pi-pencil green" *ngIf="isAdmin" (click)="editProduct(product)"></i>
      </td>
      <td>
        <i  pRipple class="pi pi-trash red" *ngIf="isAdmin" (click)="deleteProduct(product)"></i>
      </td>
      <td>
        <i  pRipple class="pi pi-cart-plus green"  (click)="addProductToCart(product)"></i>
      </td>
    </tr>
  </ng-template>
</p-table>

<p-dialog [(visible)]="productDialog" [style]="{width: '500px'}" [modal]="true" styleClass="p-fluid">
  <app-product-form></app-product-form>
</p-dialog>

<p-confirmDialog [style]="{width: '450px'}"></p-confirmDialog>
